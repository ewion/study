학습개요
이번 강의에서는 입출력 제어의 개념에 대해 알아보고 입출력 제어방식의 종류와 그 특성에 대해 살펴본다.

학습목표
입출력 제어방식의 종류에 따라 그 특성을 이해한다.
중앙처리장치에 의한 제어방식의 특성과 동작을 이해한다.
DMA 제어방식에 대해 그 특성과 동작을 이해한다.
채널에 의한 제어방식의 특성과 동작을 이해한다.

주요용어
중앙처리장치에 의한 제어 : 독립된 입출력 제어기가 없고, 중앙처리장치가 입출력 제어기의 역할을 하는 시스템이다.
DMA(Direct Memory Access) 제어 : 중앙처리장치의 개입 없이 주기억장치에 직접 접근하여 입출력을 수행하는 제어 방식
채널에 의한 제어 : 채널(channel)이라고 하는 일종의 입출력 프로세서(input output processor)를 이용하여 입출력 작업을 전담하도록 하는 방식

1. 입출력 제어의 개념
 입출력 제어의 개념
 - 데이터 처리에서 입출력은 반드시 필요하지만 중앙처리 장치에 비해 많은 시간적 차이가 있다
 - 또한 입출력장치는 자율적으로 동작하므로 중앙처리장치처럼 일률적 동기화로 제어할 수 없음
 - 따라서 입출력 동작시간은 전체 데이터 처리시간에 매우 큰 비중을 차지하기 때문에 입출력장치가 효율적으로 동작 할 수 있도록 제어하는것이 매우 중요

2. 입출력 제어방식의 종류
 중앙처리 장치에 의한 제어
 - 중앙처리장치에서 직접 입출력을 제어하는 방식
 - 가장 간단한 입출력 시스템
 - 중앙처리장치가 입출력 제어기의 역할을 하기 때문에 중앙처리장치는 간단한 입출력 제어기의 기능만을 포함한다
  프로그램에 의한 입출력
  인터럽트 처리에 의한 입출력

 프로그램에 의한 입출력
 - 중앙처리장치와 입출력 장치 사이에 입출력 인터페이스가 있는 기본 입출력 시스템에 적용
 - 이러한 시스템에서 한 바이트를 입출력 하기 위해서는 입출력장치 인터페이스에 있는 D와 B플래그를 이용한다
 - 중앙처리장치가 입출력 제어기의 역할을 하기 때문에 데이터이동은 입출력장치 인터페이스에 있는 데이터버퍼와 중앙처리장치에 있는 레지스터인 R에서 일어난다
 - 특징
  입출력장치의 속도가 느리기 때문에 한문자를 입력시키기 위하여 D플래그값이 1이 될 때 까지 중앙처리장치는 대기해야한다
  이러한 중앙처리장치의 기다림은 입출력 모두에서 나타난다
  따라서 중앙처리장치가 입출력 과정 전반에 걸쳐 개입하기 때문에 대단히 비효울 적인 입출력 방법이라고 할 수 있다

 인터럽트에 의한 입출력
 - 인터럽트 기능을 이용하여 프로그램에의한 입출력의 비효율성을 극복하는 입출력 방법
  인터럽트 : 중앙처리장치가 하던 일을 중단하고 요청이 있을 때 다른 일을 처리한 후 중단된 일을 계속하여 처리할 수 있게 하는 방식
 - 프로그램에 의한 입출력의 비효율성은 D플래그값이 1인가를 시험하는 조건부 분기 명령에 따른다, 그러므로 이 조건부 분기 명령을 제거하면 효율상 상승
 - 특징
  프로그램에 의한 입출력에서는 중앙처리장치가 항상 상태레지스터의 플래그를 모니터링 해야하지만, 인터럽트는 입출력동작에 관여하는 시점을 결정하는 것은 입출력 인터페이스이다
  따라서 인터럽트는 이 동안의 입출력과 무관한 많은 수의 명령어를 수행할 수 있으므로 효율성이 높아진다

 ----

 DMA에 의한 제어
 - 배경
  인터럽트는 프로그램에 의한 방식보다는 효율적이나 인터럽트처리를 위해 추가작업이 필요하기 때문에 중앙처리장치의 자원을 낭비하게 한다
  이러한 문제점을 개선하기 위해 DMA제어방식이 고안되었다
 - 중앙처리장치의 개입없이 주기억장치에 직접 접근하여 입출력을 행하는 방식 (DMA, Direct Memory Access)
 - 처리 순서
  1 중앙처리장치가 DMA제어기에 입출력 명령어와 정보 전송
  2 DMA제어기가 중앙처리장치로 MCR신호 전송
  3 중앙처리장치가 DMA제어기로 MCG신호 전송
  4 DMA 제어기가 주기억장치와의 입출력 수행
  5 입출력할 데이터가 남아 있으면 2~4 반복
  6 데이터 입출력이 끝나면 중앙처리장치로 INT 신호를 전송
 - DMA 제어기가 CPU로부터 전달받는 정보
  DMA 제어기가 중앙처리장치의 개입 없이 입출력을 수행한다면 중앙처리장치에서 버스의 제어권 이외에도 여러 정보를 전달받아야함
  읽기/쓰기를 수행할 주기억장치의 시작수조
  전송될 데이터 단어 수
  읽기/쓰기 지정모드 신호
  입출력을 수행할 장치 번호
 - DMA 방식의 데이터 전송방식
  DMA 대량 전송
  싸이클 스틸

 DMA 대량 전송 방식
 - DMA 제어기가 주기억장치 버스제어권을 갖고 있는 동안, 여러개의 워드로 구성된 블록이 지속적으로 전송되는 방식
 - 자기디스크와 같이 고속장치를 입출력 장치로 사용 할 때 이용
 - 이 방식을 이용하려면 중앙처리장치는 DMA제어기에 버스 제어권을 넘기면서 동작시킬 입출력장치와 동작의 종류, 접근할 주기억장치 주소 및 블록의 크기를 알려주어야 한다

 싸이클 스틸
 - DMA 제어기와 중앙처리장치는 같은 주기억장치 버스를 이용하여 주기억장치에 접근하는데, 중아처리장치는 프로그램을 수행 중일때에는 매 사이클마다 주기억장치마다 접근하려 하기 때문에
   DMA 방식에 의해 입출력이 일어날 때 DMA제어기와 중앙처리장치는 경쟁적으로 주기억장치 사이클을 사용
 - 이러한 경쟁을 해결하려는 방식으로 DMA방식은 사이클 스틸 방법 사용
 - 싸이클 스틸은 DMA제어기가 중앙처리장치로부터 주기억장치의 사이클을 뺏어 사용한다는 의미

 DMA 제어기의 내부 구조
 - 제어 회로
 - 주소 레지스터
 - 데이터 레지스터
 - 단어 계수 레지스턴

 DMA 제어방식의 특징
 - DMA 제어방식은 인터럽트보다 효율적이지만 중앙처리장치가 전송에 관여하지 않아 지능적이지 않다
  채널을 정확히 설정해야하거나, 전송 중 정지 시 데이터의 일관성에 문제, 충돌문제
 - DMA 컨트롤러는 지능적이지 않기 때문에 데이터전송사이즈를 다양하게 할 수 없으며, 가상주소나 다양한 계층의 캐시 사용불가

 ----

 채널에 의한 제어

 개요
 - 채널이라고 하는 일종의 입출력 프로세스를 이용하여 입출력 작업을 전담하도록 하는 방식
 - 입출력 프로세서인 채널은 입출력 장치와 주기억장치 사이의 데이터 전송을 위한 통로를 제공
 - 채널은 컴퓨터 시스템의 중앙처리장치와 유사하여, 입출력 데이터를 전송 이외에도 산술/논리/분기 등의 연산작업도 수행 할 수 있다
 - 채널이 일을 수행하기 시작하면 중앙처리장치와 독립적으로 동작
 - 채널의 사용은 중앙처리장치의 이용 효율이 증가하나, 하드웨어적 비용이 증가하는 단점

 채널 프로그램
 - 채널 입출력을 위해 수행하는 프로그램
 - 중앙처리장치는 채널 프로그램을 주기억장치에 기억시켜 놓고 주기억장치 내의 채널프로그램 시작주소를 채널에 전달하면 채널에 의한 입출력 수행
 - 일반적인 프로그램이 명령어로 구성되는 것과 같아 채널 프로그램은 채널 명령어들로 구성된다

 채널의 종류
 - 선택기 채널
 - 멀티플렉서 채널

