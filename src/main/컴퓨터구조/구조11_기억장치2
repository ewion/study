학습개요
이번 강의에서는 캐시기억장치의 동작원리에 대해 살펴보고 가상기억장치의 개념과 동작원리 그리고 보조기억장치의 종류와 특징에 대해 학습한다.

학습목표
캐시기억장치의 여러 가지 사상방법에 대해 이해한다.
가상기억장치의 기억공간과 동작원리를 이해한다.
가상기억장치의 주소변환방법을 이해한다.
보조기억장치의 종류별 특징을 이해한다.

주요용어
블록(block) : 주기억장치 내에 연속적으로 저장된 일정한 수의 단어
희생 블록(victim block) : 캐시에 미스 되었을 때 접근하려는 데이터를 캐시에 가져오기 위하여 한 블록을 기억시킬 수 있을 공간을 확보해야 되는데 이때 확보된 공간을 의미한다.
블록 교환(block replacement) : 캐시에서 희생블록을 원래 주 기억장치의 저장되어 있던 곳에 다시 저장하고, 캐시의 희생블록이 저장되어 있던 곳에는 접근하려는 데이터가 포함되어 있는 주기억장치 블록을 저장시키는 것을 의미
히트(hit) : 접근하고자 하는 단어가 캐시기억장치에 저장되어있는 경우
미스(miss) : 접근하고자 하는 단어가 캐시기억장치에 저장되어 있지 않은 경우
직접 사상 : 중앙처리장치 주소를 Index필드와 Tag필드로 나누고 캐시 기억장치에서 이 두 필드가 모두 같은 데이터를 가져오는 방식
연관 사상 : 주기억장치의 주소와 데이터를 쌍으로 함께 캐시 기억장치에 저장하는 방식
집합-연관 사상 : 하나의 Index에 두 개 이상의 데이터를 저장시켜 집합을 만드는 방식
가상 주소(virtual address) : 가상기억장치 시스템에서 수행되는 프로그램의 명령어가 사용하는 주소
물리 주소(physical address) : 주기억장치에 접근하기 위해 실제 주기억장치에 적용하는 주소
페이지(page) : 가상주소공간과 주기억장치의 기억공간이 일정한 크기를 갖는 연속 된 공간으로 구분된 것
세그먼트(segment) : 가상주소공간과 주기억장치의 기억공간이 크기가 일정하지 않는 연속된 기억공간으로 구분된 것
페이징 방법 : 가상기억공간의 프로그램 블록과 실제 기억공간의 프로그램 블록의 크기를 페이지로 나누고, 이러한 페이지를 이용하는 주소변환방식
세그먼트 방법 : 프로그램의 논리적인 구조에 따라 페이지의 크기를 다양하게 나누 는 방법인 세그먼트기법을 이용하는 주소변환방식
순차접근 : 자료가 순차적으로 저장되기 때문에 원하는 자료에 접근하려면 처음에 들어있는 자료부터 순서적으로 데이터를 검색해나가는 방법
직접접근 : 파일내의 특정한 레코드를 검색할 때 처음부터 차례대로 접근하는 것이 아니라 직접 원하는 레코드에 접근할 수 있는 방법
SSD(Solid State Device) : 자기 디스크가 아닌 반도체 메모리를 내장한 보조기억장치로서, 하드 디스크보다 빠른 속도의 데이터 읽기, 쓰기가 가능
RAID 시스템 : 크기가 작고, 저가인 여러 개의 하드 디스크들을 묶어 하나의 기억 장치처럼 사용하는 시스템

1. 캐시기억장치의 사상방식
 사상(mapping)
 - 캐시기억장치와 주기억장치 사이에 데이터 이동
 - 중앙처리장치가 캐시기억장치에서 데이터를 가져오려 할 때
  원하는 데이터가 없을 경우 즉 미스가 일어나면 캐시기억장치의 일부분을 주기억장치로 보내고 주기억장치의 데이터를 캐시기억장치로 가져와야 하는 등의 데이터 이동 발생

 사상의 종류
 - 직접 (direct)
 - 연관 (associative)
 - 집합-연관 (set-associative)

 직접 사상
 - 중앙처리장치가 주기억장치를 참조할 때 중앙처리장치로부터 나온 주소를 Tag필드와 Index 필드로 나눈다
 - 데이터를 찾을 때 : 캐시기억장치에서 중앙처리장치 주소의 Index 필드와 같은 Index를 찾아 Tag까지 같다면 그 주소의 데이터를 가져간다
 - 만약 Index에 데이터가 없거나 또는 Index가 같으나 Tag가 다르면 주기억장치에서 데이터를 찾아 가져 오는 방식

 연관 사상
 - 캐시기억장치에 데이터블록을 저장할 때, 데이터와 그 데이터의 주기억장치 주소도 함께 저장하는 방식
 - 주기억장치의 어떤 데이터 블록도 캐시기억장치의 임의의 위치에 저장 할 수 있기 때문에 직접사상방식의 단점을 일부분 보완할 수 있다

 집합-연관 사상
 - 직접사상 + 연관사상
 - 캐시기억장치의 하나의 인덱스에 두개 이상의 서로 다른 데이터블록을 저장시켜서 하나의 세트를 만든다
 - 데이터를 찾을 때 캐시기억장치에서 중앙처리장치의 주소의 인덱스와 같은 인덱스를 찾은 후
   그 인덱스에 저장되어 있는 서로 다른 태그를 갖는 데이터들 중에서
   연관사상 방식에서와 같은 방식으로 찾고자 하는 데이터의 태그와 같은 태그를 갖는 데이터를 찾아 가져온다

 주기억장치와 캐시기억장치 사이의 주소관계의 예

2. 가상기억장치
 목적
 - 보조기억장치와 같이 기억용량이 큰 기억장치를 마치 주기억장치처럼 사용하는 개념
 - 주기억장치의 기억용량이 부족한 점을 개선하기 위해 비트당 가격과 기억용량이 보조기억장치와 같으며 속도가 주기억장치와 같은 기억장치를 제공받는 것이다

 기억공간
 - 중앙처리장치에서 참조되는 각 주소는 가상주소를 주기억장치의 물리주소로 전환하는 주소 매핑을 해야 한다
 - 가상주소 : 가상기억장치 시스템에서 수행되는 프로그램의 명령어가 사용하는 주소
 - 물리주소 : 주기억장치에 접근하기 위해 실제 주기억장치에 적용하는 주소
 - 따라서 주기억장치 접근을 위해서는 가상주소가 실제주소로 변환되어야 한다

 동작 원리
 - 프로그램을 블록 단위로 나누어 실제 주기억장치에는 현재 실행되는 프로그램에 필요한 블록만을 기억시키고, 나머지 부분에는 보조기억장치 그대로 두었다가 필요시 주기억장치에 올리낟
 - 이러한 일련의 작업들은 운영체제가 담당하는 것이므로 중앙처리장치의 입장에서 보면 프로그램에 필요한 모든 내용이 마치 주기억장치에 모두 있는 것처럼 사용하는 것
 - 블록의 기본 개념은 페이지이며 세그먼트를 사용하기도 한다

 가상기억장치의 주소변환
 - 주소변환은 주소 변환표(매핑표) 를 이용
  중앙처리장치가 가상주소로 기억장치에 접근하려고 하면 이 가상주소가 변환표에서 물리주소로 변환되어 이 주소로 실제 주기억장치에 접근한다
 - 주소변환 방법 : 페이징, 세그먼트

 페이징
 - 가상 기억공간의 프로그램 블록과 실제 기억공간의 프로그램 블로그이 크기가 같고, 각 블록의 크기도 모두 동일하게 나누어진 블록을 페이지라고 할 때, 이 페이지를 이용하는 방법
 - 즉 가상기억공간을 동일한 크기의 페이지로 나누어 사용하는 방법
 - 원리 : 가상주소를 페이지번호와 페이지 내의 상대위치로 나타내고 변환표를 이용하여 주소변환

 세그먼트
 - 주소공간(가상기억공간)을 세그먼트 단위로 분할
 - 세그먼트는 페이지와 달리 분활되는 주소공간의 크기가 동일하지 않다. 가변길이의 주소공간을 갖는다
 - 원리 : 프로그램의 논리적 구조에 따라 페이지의 크기를 다양하게 나누는 방법
 - 프로그래머가 프로그램을 논리적인 구조에 따라 세그먼트화 하고, 시스템에서 다시 이것을 페이지 단위로 나눈다
 - 가상주소를 논리 주소라고도 하며, 논리주소는 세그먼트 번호, 페이지 번호, 워드 번호의 세 부분으로 표현된다

3. 보조기억장치
 개념
 - 당장 필요하지 않지만 필요할 때 주기억장치로 옮겨 사용할 수 있는 자료를 저장하는 장치

 종류
 - 접근시간, 방법, 데이터의 저장매체에 따라
  자기매체 (자기디스크, 자기테이프)
  광학디스크 (컴팩트 디스크)
  반도체 메모리 (SSD)
 - 구성방법에 따라
  RAID 시스템

 데이터의 접근 방법
 - 순차접근
  자료가 순차적으로 저장하기 때문에 원하는 자료에 접근하려면 처음에 들어있는 자료부터 순서적으로 데이터를 검색
  파일의 레코드들이 차례대로 읽혀지기 때문에 일괄처리에 주로 사용(자기 테이프)
 - 직접접근
  순차적 접근하지 않고 직접 원하는 레코드에 접근
  데이터 검색이 빠르며 실시간 처리에 주로 사용(자기 디스크)

 자기 디스크
 - 금속, 플로스틱으로 만들어진 원형판을 자화한 물질로 코팅한 기억메체
 - 헤드라고 불리는 유도코일을 사용해서 데이터를 읽고 쓴다
 - 하드디스크, 플로피 디스크
 - 트랙이라는 동심원의 집합으로 이루어짐
 - 데이터 전송은 블록단위로 이루어지며 일반적으로 한블록의 크기는 한트랙보다 작다
 - 데이터를 트랙에 효율적으로 기록하기 위해 트랙을 섹터라고 부르는 영역으로 나누고 이곳에 블록단위로 데이터를 기록한다

 자기 테이프
 - 산화자기박막으로 코팅된 테이프
 - 순차접근 방식의 기억장치
  장점 : 기록밀도의 효율성이 높음(데이터 백업용)
  단점 : 속도가 느림
 - 데이터는 레코드 단위로 기록됨

 광학 디스크
 - 광학 매체를 이용한 보조기억장치
 - 플라스틱 재질의 투명한 디스크원판 내부에 알루미늄등을 코팅해 반사면을 기록면으로 만들고 빛을 이용해 1과 0을 기록하고 판독
 - 정보 저장용량이 매우 크다, 멀티미디어 응용분야에서 사용

 SSD
 - 하드디스크의 문제점
  자기디스크를 이용함에 따라 처리속도의 한계
  디스크의 회전에 따른 소음과 전력소모
 - SSD는 자기디스크가 아닌 반도체 메모리 내장

 SSD의 내부 구조
 - 연결포트
 - NAND 플래시 메모리
 - SSD 컨트롤러
 - 버퍼 메모리

 SSD의 동작
 - SSD는 블록과 페이지를 기반으로 한 구조
 - 따라서 SSD 컨트롤러에서 물리블록과 페이지 위에 논리섹터를 구현

 RAID 시스템
 - 고가의 대용량 디스크 시스템을 의미하는 SLED를 저가의 작은 디스크 배열로 대체하기 위해 RAID 시스템을 개발
 - 크기가 작고 저가인 여러개의 하드디스크를 묶어 하나의 기억장치처럼 사용하는 시스템
 - 여러개의 하드디스크에 데이터를 분산 처리하지만 운영체제는 하나의 디스크로 인식
 - 전송율을 높이기 위해 입출력을 병렬로 처리해야 하므로 여러개의 헤드와 구동장치 필요
 - 장치가 늘어날 수록 오류발생율도 늘어나므로 오류검출용 패리티 비스틑 저장할 수 있는 여분의 디스크 필요
 - 0레벨 ~ 6레벨 7종류가 존재
  각 레벨 사이에 계층적관계가 없으며 서로다른 특성을 가진다