학습개요
쿠키란 웹 브라우저에 저장되는 작은 크기의 텍스트 데이터로서 <이름, 값>으로 구성된다.
쿠키는 서버에서 만들어져 클라이언트의 브라우저로 전송되어 사용자 컴퓨터에 저장되었다가, 클라이언트가 같은 서버에 다시 요청을 보낼 때 요청 헤더에 포함되어 보내진다.
서버와 클라이언트 간에 상태를 공유함으로써 페이지 간의 지속성 서비스를 제공하기 위한 기법의 하나가 쿠키이다.

학습목표
쿠키의 기능을 설명할 수 있다.
쿠키의 생성과 전송을 프로그래밍할 수 있다.
쿠키의 도메인, 경로 및 유효 시간의 의미를 설명할 수 있다.
쿠키를 이용하여 로그인/로그아웃을 처리할 수 있다.

정리하기
웹 클라이언트의 최초 요청에 대한 응답을 웹 서버가 보낼 때, 상태 관리를 위해 쿠키를 응답 헤더에 넣어 보낼 수 있다.
쿠키는 <이름, 값>의 형태로 구성되고 유효시간, 도메인, 경로 등의 부가 정보가 추가될 수 있다.
쿠키를 클라이언트에 보내려면 객체를 생성한 후 response.addCookie(Cookie)를 이용한다.
유효시간이 경과된 쿠키는 클라이언트에서 자동으로 삭제된다. 유효시간의 기본 값은 –1로 이 경우 웹 브라우저의 종료와 함께 쿠키도 사라진다.
클라이언트에서 서버로 요청할 때, 쿠키에 지정된 도메인과 경로에 따라 상응하는 페이지로의 요청에만 쿠키가 동봉된다.

1. 쿠키의 생성과 서용
 쿠키의 의미
 - 사용자 식별 정보
 - <이름, 값> 을 가지는 작은 크기의 텍스트 데이터, 쿠키에 추가 정보(속성)을 포함시킬 수 있음

 쿠키의 사용
 - 최초 요청의 처리에서 웹서버가 쿠키를 만들어 응답헤더에 포함시킴
 - 웹 브라우저가 쿠키를 저장했다가, 차후 같은 서버에 다른요청을 보낼 때, 저장중인 쿠키를 요청 헤더에 보냄
 - 서버와 클라이언트간 상태 정보를 공유함으로써 연이은 여러 오청을 관련지어 처리할 수 있음
 - 웹 서버는 쿠키 정보를 이용하여 사용자 식별

 쿠키의 구성
 - 하나의 쿠키는 하나의 <이름, 값>을가짐
  이름과 값은 알파벳과 숫자로 구성된 문자열
 - 쿠키는 추가 정보를 가질 수 있음
  유효시간 : 쿠키의 지속시간
  도메인 : 쿠키를 만들고 이용할 서버를 지정
  경로 : 쿠키가 보내질 서버의 경로 지정
  주석 : 쿠키의 목적 설명
 - 추가 정보는 브라우저가 기억

 쿠키의 생성과 전송
 - 쿠키의 생성
  서버 측 JSP페이지에서 Cookie클래스의 객체를 생성
  new Cookie(String name, String value)
 - 생성된 쿠키의 전송
  response.addCookie(Cookie)는 응답 헤더에 쿠키 하나를 추가
  쿠키를 전송 전에 추가 정보를 설정 할 수 있음

 쿠키 클래스의 메소드

2. 쿠키값 읽기 변경 삭제
 쿠키 값 읽기
 - JSP페이지에서 클라이언트가 보낸 쿠키를 읽을 때는 requset.getCookies를 사용
 - 웹 브라우저로부터 전송된 Cookie객체들의 배열을 리턴함

 쿠키의 유효 시간
 - 정보의 공유를 위해 브라우저가 쿠키를 저장하는 시간
  쿠키 생성 후 Cookie클래스의 setMaxAge(int seconds)를 사용하여 지정
  유효시간이 경과된 쿠키는 웹브라우저에서 자동 삭제
  유효 시간을 0으로 하면 기존 쿠키를 삭제
 - 시간 설정을 하지 않으면 웹브라우저가 종료될 때 쿠키 삭제
  기본 값인 -1로 설정됨

 쿠키 값의 변경과 쿠키 삭제
 - 쿠키 값의 변경
  같은 이름의 Cookie객체를 만들고 또는 변경하려는 Cookie 객체의 값을 바꾼 후 응답에 쿠키를 추가함
 - 쿠키 삭제
  쿠키 값의 변경 방법과 유사
  삭제하고자 하는 Cookie 객체 또는 같은 이름의 객체를 이용하여 유효시간을 0으로 한 후에 응답에 쿠키를 추가함
3. 쿠키의 도메인과 경로
 쿠키의 도메인
 - 요청시 쿠키의 전송(클라이언트 ->서버)
  기본적으로 쿠키는 그걸 보낸 서버에만 전송 가능
  쿠키의 도메인 설정하면 같은 도메인 상에 있는 다른 호스트들과 쿠키 공유 가능 (네이버 도메인 설정하면 네이버도메인 상의 호스트 들이 쿠키사용가능)

 쿠키의 도메인 설정
 - 쿠키를 이용한 도메인을 설정하는 것
 - Cookie 클래스의 setDomain(String domain)을 사용
 - 서버는 자신이 속한 도메인 내에서 쿠키의 도메인 설정 가능
 - 쿠키를 생성한 서버의 주소와 관련없는 도메인은 의미가 없음

 쿠키의 경로 설정
 - 클라이언트가 서버에 요청을 보낼 때, 쿠키를 보낼 서버 상의 경로를 정하는 것
  경로는 URL에서 서버 주소 이후 나오는 부분을 의미함
  지정 경로(하위 경로 포함) 에 있는 페이지에만 쿠키를 보냄
  경로를 지정하지 않으면 쿠키를 만든 페이지가 위치한 경로로 설정됨
 - Cookie 클래스의 setPath(String uri)를 사용

4. 쿠키를 이용한 로그인 구현
 HTTP프로토콜의 statelsee 특성
 - 서버가 응답을 보낸 후에는 클라이언트에 상태에 대해 알지 못함
 - 상태 관리를 위해 쿠키나 세션을 이용해야 함

 쿠키를 이용한 로그인/로그아웃 구현
 - 아이디/비밀번호를 입력할 수 있는 폼 제시
 - 사용자가 입력한 아이디/비밀번호 읽고 가입된 회원인지 판단
 - 가입된 회원이라면 로그인 상태에서 사용할 쿠키 생성
 - 이후 페이지를 방문할 때에는 서버가 클라이언트가 보낸 쿠키를 가지고 로그인 여부 판단
 - 로그아웃 시 사용했던 쿠키 삭제